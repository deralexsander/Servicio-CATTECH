"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4246],{4246:(M,m,a)=>{a.r(m),a.d(m,{VisitasPageModule:()=>b});var u=a(177),o=a(4341),r=a(4742),d=a(7965),f=a(467),g=a(7691),t=a(3953),p=a(2303);const h=[{path:"",component:(()=>{var n;class s{constructor(e,i){this.fb=e,this.databaseService=i,this.imagenes=[],this.maxImages=5}ngOnInit(){this.visitaForm=this.fb.group({cliente:["",o.k0.required],fecha:["",o.k0.required],hora:["",o.k0.required],direccion:["",o.k0.required],motivo:["",o.k0.required]})}get cliente(){return this.visitaForm.get("cliente")}get fecha(){return this.visitaForm.get("fecha")}get hora(){return this.visitaForm.get("hora")}get direccion(){return this.visitaForm.get("direccion")}get motivo(){return this.visitaForm.get("motivo")}onFileChange(e){const i=e.target.files;i.length>this.maxImages?alert(`Solo puedes subir hasta ${this.maxImages} im\xe1genes.`):this.imagenes=Array.from(i)}onSubmit(){var e=this;return(0,f.A)(function*(){if(e.visitaForm.valid&&e.imagenes.length<=e.maxImages){const i=e.visitaForm.value,l={fecha:i.fecha,hora:i.hora,motivo:i.motivo,direccion:i.direccion,imagenes:"",nombre_dispositivo:"Dispositivo Ejemplo",estado_servicio:"Pendiente",tipo_servicio:"Mantenimiento",cliente_id:Number(i.cliente)};yield e.databaseService.addServicioConImagen(l),console.log("Visita agendada:",i)}})()}takePicture(){return(0,f.A)(function*(){try{const e=yield g.i7.getPhoto({quality:90,allowEditing:!1,resultType:g.LK.Uri,source:g.ru.Camera});console.log("Imagen capturada:",e.webPath)}catch(e){console.error("Error al tomar la foto:",e)}})()}}return(n=s).\u0275fac=function(e){return new(e||n)(t.rXU(o.ok),t.rXU(p.B))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-visitas"]],decls:39,vars:3,consts:[[1,"agendar-visita-content",3,"fullscreen"],["routerLink","/tabs/home",1,"container-start"],[1,"text"],[1,"container-end"],["routerLink","/perfil","src","assets/isotipos/logo perfil.png","alt","logo",1,"logo-size"],[1,"container_start-padding_down"],[1,"tittle"],[3,"ngSubmit","formGroup"],["formControlName","cliente","type","text"],["formControlName","fecha","type","date"],["formControlName","hora","type","time"],["formControlName","direccion","type","text"],["formControlName","motivo","type","text"],["type","file","multiple","",3,"change"],[3,"click"],["expand","full","type","submit",3,"disabled"]],template:function(e,i){1&e&&(t.j41(0,"ion-content",0)(1,"a",1)(2,"ion-text",2),t.EFF(3,"< atras "),t.k0s()(),t.j41(4,"div",3),t.nrm(5,"img",4),t.k0s(),t.j41(6,"div",5)(7,"ion-text",6),t.EFF(8,"Agendar Visita"),t.k0s()(),t.j41(9,"ion-content")(10,"form",7),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(11,"ion-item")(12,"ion-label"),t.EFF(13,"Cliente"),t.k0s(),t.nrm(14,"ion-input",8),t.k0s(),t.j41(15,"ion-item")(16,"ion-label"),t.EFF(17,"Fecha"),t.k0s(),t.nrm(18,"ion-input",9),t.k0s(),t.j41(19,"ion-item")(20,"ion-label"),t.EFF(21,"Hora"),t.k0s(),t.nrm(22,"ion-input",10),t.k0s(),t.j41(23,"ion-item")(24,"ion-label"),t.EFF(25,"Direcci\xf3n"),t.k0s(),t.nrm(26,"ion-input",11),t.k0s(),t.j41(27,"ion-item")(28,"ion-label"),t.EFF(29,"Motivo"),t.k0s(),t.nrm(30,"ion-input",12),t.k0s(),t.j41(31,"ion-item")(32,"ion-label"),t.EFF(33,"Im\xe1genes"),t.k0s(),t.j41(34,"input",13),t.bIt("change",function(v){return i.onFileChange(v)}),t.k0s(),t.j41(35,"ion-button",14),t.bIt("click",function(){return i.takePicture()}),t.EFF(36,"Tomar Foto"),t.k0s()(),t.j41(37,"ion-button",15),t.EFF(38,"Agendar Visita"),t.k0s()()()()),2&e&&(t.Y8G("fullscreen",!0),t.R7$(10),t.Y8G("formGroup",i.visitaForm),t.R7$(27),t.Y8G("disabled",!i.visitaForm.valid))},dependencies:[o.qT,o.BC,o.cb,o.j4,o.JD,r.Jm,r.W9,r.$w,r.uz,r.he,r.IO,r.Gw,r.N7,r.oY,d.Wk],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background:#c4dee7}a[_ngcontent-%COMP%]{text-decoration:none}.container-start[_ngcontent-%COMP%]{display:flex;align-items:start;flex-direction:column;display:inline-block;padding:30px 12px 12px}.tittle[_ngcontent-%COMP%]{color:#413f3f;font-size:2.5em;font-family:Franklin Gothic Medium}.container-center[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;padding:0}.style-input-fecha[_ngcontent-%COMP%]{--border-radius: 15px !important;--background: #ffffff;color:#fff;font-family:sans-serif}.style-input-text[_ngcontent-%COMP%], .style-input[_ngcontent-%COMP%]{--border-radius: 15px !important;--background: #ffffff;color:#000;font-family:sans-serif}.container-input[_ngcontent-%COMP%]{padding:5px 20px}.icon-size[_ngcontent-%COMP%]{position:relative;z-index:1;width:35%;height:35%}.text[_ngcontent-%COMP%]{color:#413f3f;font-size:1.6em;font-family:Franklin Gothic Medium}.text-mini[_ngcontent-%COMP%]{display:flex;justify-content:start;align-items:start;color:#413f3f;font-size:1em;font-family:Franklin Gothic Medium}.container_center-padding_up[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;padding:10px 0 5px}.style-btn-white[_ngcontent-%COMP%]{--background: #ffffff;width:55%;font-size:1.2em;--border-radius: 20px}.style-btn-red[_ngcontent-%COMP%]{--background: #f13d3d;width:55%;font-size:1.2em;--border-radius: 20px}.text-center-black[_ngcontent-%COMP%]{text-align:center;color:#030303;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}.text-center-white[_ngcontent-%COMP%]{text-align:center;color:#fff;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}.container-end[_ngcontent-%COMP%]{display:flex;align-items:flex-end;flex-direction:column;padding:12px}.tittle[_ngcontent-%COMP%]{color:#000;font-size:2.5em;font-family:Franklin Gothic Medium}ion-list[_ngcontent-%COMP%]{background-color:#c4dee7}ion-item[_ngcontent-%COMP%]{background-color:#6a3cd6;--border-width: 0;background:#47b9ee;border-radius:10px;margin:10px 0}ion-text[_ngcontent-%COMP%]{margin-left:16px}.agendar-visita-content[_ngcontent-%COMP%]{--background: #94cbe0}ion-label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px}ion-datetime[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--inner-border-width: 0px}.logo[_ngcontent-%COMP%]{width:60%;height:60%}.logo-size[_ngcontent-%COMP%]{width:12%;height:12%}.style-btn[_ngcontent-%COMP%]{--background: #283df7;width:90%;font-size:1.2em;--border-radius: 15px}']}),s})()}];let P=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[d.iI.forChild(h),d.iI]}),s})(),b=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[u.MD,o.YN,o.X1,r.bv,P]}),s})()}}]);