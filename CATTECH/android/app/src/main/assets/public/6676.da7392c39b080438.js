"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6676],{6676:(H,g,n)=>{n.r(g),n.d(g,{HistorialPageModule:()=>b});var u=n(177),h=n(4341),s=n(4742),l=n(7965),p=n(467);class d{constructor(a,i,t,c,r,M,C,y,x,F){this.id=F,this.fecha=a,this.hora=i,this.motivo=t,this.direccion=c,this.imagenes=r,this.nombre_dispositivo=M,this.estado_servicio=C,this.tipo_servicio=y,this.cliente_id=x}}var e=n(3953),m=n(2303);function f(o,a){if(1&o&&(e.j41(0,"ion-card",6)(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s(),e.j41(4,"ion-card-subtitle"),e.EFF(5),e.k0s()(),e.j41(6,"ion-card-content"),e.EFF(7),e.k0s()()),2&o){const i=a.$implicit;e.Y8G("color",i.color),e.R7$(3),e.JRh(i.title),e.R7$(2),e.JRh(i.subtitle),e.R7$(2),e.SpI(" ",i.content," ")}}const v=[{path:"",component:(()=>{var o;class a{constructor(t){this.databaseService=t,this.cards=[]}ngOnInit(){this.databaseService.crearBD().then(t=>{this.database=t,console.log("Base de datos creada"),this.addFakeServicios()}).catch(t=>console.error("Error al crear la BD",t)),this.databaseService.dbReady().subscribe(t=>{t&&(console.log("Base de datos lista"),this.cargarServicios())})}addFakeServicios(){var t=this;return(0,p.A)(function*(){const c=[new d("2024-10-07","10:00","Reparaci\xf3n de pantalla","Calle Falsa 123","ruta/a/imagen1.jpg","Laptop","listo","Reparaci\xf3n",1),new d("2024-10-06","14:30","Mantenimiento general","Calle Verdadera 456","ruta/a/imagen2.jpg","PC de escritorio","trabajando","Mantenimiento",2),new d("2024-10-05","09:00","Cambio de bater\xeda","Avenida Siempreviva 742","ruta/a/imagen3.jpg","Smartphone","problemas","Reparaci\xf3n",3)];try{yield Promise.all(c.map(r=>t.databaseService.addServicio(r))),console.log("Todos los servicios de prueba agregados")}catch(r){console.error("Error al agregar servicios de prueba",r)}})()}cargarServicios(){var t=this;return(0,p.A)(function*(){try{const c=yield t.databaseService.getServicio();t.cards=c.map(r=>({title:r.tipo_servicio,subtitle:r.fecha,content:`${r.nombre_dispositivo} - ${r.estado_servicio||"Desconocido"}`,color:t.obtenerColorTipo(r.tipo_servicio)}))}catch(c){console.error("Error al cargar servicios",c)}})()}obtenerColorTipo(t){switch(t.toLowerCase()){case"mantenimiento":return"success";case"reparacion":return"danger";case"revision":return"primary";default:return"secondary"}}}return(o=a).\u0275fac=function(t){return new(t||o)(e.rXU(m.B))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-historial"]],decls:8,vars:2,consts:[[1,"no-scroll",3,"fullscreen"],[1,"container-end"],["routerLink","/perfil","src","assets/isotipos/logo perfil.png","alt","logo",1,"logo-size"],[1,"container_start-padding_down"],[1,"tittle"],["class","text-center-white card-size",3,"color",4,"ngFor","ngForOf"],[1,"text-center-white","card-size",3,"color"]],template:function(t,c){1&t&&(e.j41(0,"ion-content",0)(1,"div",1),e.nrm(2,"img",2),e.k0s(),e.j41(3,"div",3)(4,"ion-text",4),e.EFF(5,"Historial de resumenes"),e.k0s()(),e.j41(6,"ion-content"),e.DNE(7,f,8,4,"ion-card",5),e.k0s()()),2&t&&(e.Y8G("fullscreen",!0),e.R7$(7),e.Y8G("ngForOf",c.cards))},dependencies:[u.Sq,s.b_,s.I9,s.ME,s.HW,s.tN,s.W9,s.IO,s.N7,l.Wk],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background:#c4dee7}.no-scroll[_ngcontent-%COMP%]{--overflow: hidden}a[_ngcontent-%COMP%]{text-decoration:none}.container_start-padding_down[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-direction:column;padding:0 0 20px 10px}.tittle[_ngcontent-%COMP%]{color:#413f3f;font-size:2em;font-family:Franklin Gothic Medium}.logo-size[_ngcontent-%COMP%]{width:12%;height:12%}.container-end[_ngcontent-%COMP%]{display:flex;align-items:flex-end;flex-direction:column;padding:20px 25px 0 0}.style-segment[_ngcontent-%COMP%]{padding:0 20px}.style-btn[_ngcontent-%COMP%]{background:#fff}.only-border-left[_ngcontent-%COMP%]{border-radius:0 15px 15px 0}.only-border-right[_ngcontent-%COMP%]{border-radius:15px 0 0 15px}.text-center-black[_ngcontent-%COMP%]{text-align:center;color:#030303;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}']}),a})()}];let P=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[l.iI.forChild(v),l.iI]}),a})(),b=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.MD,h.YN,s.bv,P]}),a})()}}]);