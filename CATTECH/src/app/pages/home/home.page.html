<ion-content [fullscreen]="true">
  <div class="container-end">
    <img routerLink="/perfil" [src]="user?.photoURL || 'assets/isotipos/logo perfil.png'" alt="logo" class="logo-size" />
  </div>

  <div class="container_start-padding_down">
    <ion-text class="tittle">Soporte técnico</ion-text>
  </div>

  <div class="container_start-padding_down" *ngIf="visitas.length >= 1" >
    <ion-text routerLink="/tabs/historial" class="text">Últimos servicios ></ion-text>
  </div>

  <div class="carrucel">
    <!-- Mostrar solo las primeras 3 visitas -->
    <ng-container *ngFor="let visita of visitas | slice:0:3">
      <a routerLink="/tabs/historial">
        <ion-card 
          class=" card-size" 
          [ngClass]="{
            'en-espera': visita.estado === 'en espera',
            'listo': visita.estado === 'listo',
            'trabajando': visita.estado === 'trabajando'
          }">
          <div class="container-center-paddingUp">
            <ion-text class="title-white">{{ visita.titulo }}</ion-text>
          </div>
          <ion-card-content>
            <div class="container-center">
              <ion-text class="text-white">{{ visita.fecha }}</ion-text>
            </div>
            <div class="container-center">
              <ion-text class="text-white">{{ visita.estado }} - {{ visita.tipo_tarjeta }}</ion-text>
            </div>
          </ion-card-content>
        </ion-card>
      </a>
    </ng-container>
  

    <!-- Mostrar el botón "Ver más" solo si hay más de 3 visitas -->
    <a *ngIf="visitas.length >= 3" routerLink="/tabs/historial">
      <ion-card color="success" class="text-center-white card-size">
        <ion-card-header>
          <ion-card-title>Ver más</ion-card-title>
        </ion-card-header>
      </ion-card>
    </a>
  </div>

  <div class="container_start-padding_up">
    <ion-text class="text">Herramientas de soporte</ion-text>
  </div>

  <div class="container-center">
    <ion-button routerLink="/visitas" class="style-btn">
      <img src="assets/icon/agendar.png" alt="icon" class="icon-size-small" />
      <ion-text class="text-center-white">Agendar visita</ion-text>
    </ion-button>

    <ion-button routerLink="/reciclar" class="style-btn">
      <img src="assets/icon/reciclar.png" alt="icon" class="icon-size-small" />
      <ion-text class="text-center-white">Reciclar aparato</ion-text>
    </ion-button>
  </div>

  <div class="container_start-padding_up">
    <ion-text class="text">Ayuda</ion-text>
  </div>

  <a routerLink="/contacto" class="container-center">
    <ion-button class="style-btn">
      <img src="assets/icon/ayuda.png" alt="icon" class="icon-size-big" />
      <ion-text class="text-center-white">Contáctate con nosotros</ion-text>
    </ion-button>
  </a>
</ion-content>
